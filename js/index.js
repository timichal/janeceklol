var J=e=>e[Math.floor(Math.random()*e.length)],q=[{url:"https://source.unsplash.com/800x800?people",weight:10},{url:"https://source.unsplash.com/800x800?group",weight:5}],K=q.flatMap(({url:e,weight:t})=>Array(t).fill(e)),I=!1,S="",W=new FileReader,f=new Image,N=async()=>{let e=await fetch(J(K));return new Promise(t=>{let i=new Image;i.addEventListener("load",()=>{f=i,t()}),i.crossOrigin="anonymous",i.src=e.url})},s=document.getElementById("picture"),a=s.getContext("2d"),z=()=>{let e=s.getBoundingClientRect();return{offsetX:e.left,offsetY:e.top,canvasScale:e.width/800}},{offsetX:L,offsetY:T,canvasScale:c}=z(),b=!1,k,B,j=new Image;j.src="public/janecek.png";var A=493,D=897,X=1.8,n={x:500,y:800-D/X,width:A/X,height:D/X},P=e=>{let t=!!e.touches,i=Number((t?e.touches[0].clientX:e.clientX)-L),o=Number((t?e.touches[0].clientY:e.clientY)-T),d=n.x*c,l=n.y*c,m=n.width*c,u=n.height*c;i>d&&i<d+m&&o>l&&o<l+u&&(b=!0),k=i,B=o};s.addEventListener("mousedown",P);s.addEventListener("touchstart",P);s.addEventListener("mouseup",()=>{b=!1});var U=e=>{!e.type.startsWith("image/")||W.readAsDataURL(e)};s.addEventListener("dragover",e=>e.preventDefault());function Q(e,t,i,o,d,l){let m=t.split(`
`);for(let u=0;u<m.length;u++){let h=m[u].split(" "),g="";for(let y=0;y<h.length;y++){let M=`${g+h[y]} `;e.measureText(M).width>d&&y>0?(e.fillText(g,i,o),g=`${h[y]} `,o+=l):g=M}e.fillText(g,i,o),o+=l}}s.addEventListener("drop",e=>{e.preventDefault(),!(!e.dataTransfer||e.dataTransfer.files.length<=0)&&U(e.dataTransfer.files[0])});var v=async()=>{a.fillStyle="black",a.fillRect(0,0,s.width,s.height);let e=s.width/f.width,t=s.height/f.height,i=Math.max(e,t);if(a.setTransform(i,0,0,i,0,0),a.drawImage(f,0,0),a.setTransform(),a.drawImage(j,n.x,n.y,n.width,n.height),I){let o=95,d=95,l=700;a.font=`bold ${o}px 'bc-novatica-cyr'`;let m=S||"Tohle s memy",u=50,h=350;a.fillStyle="#f9dc4d",a.textBaseline="top",a.fillStyle="yellow",Q(a,m,u,h,l,d)}},$=e=>{let t=!!e.touches,i=Number((t?e.touches[0].clientX:e.clientX)-L),o=Number((t?e.touches[0].clientY:e.clientY)-T),d=n.x*c,l=n.y*c,m=n.width*c,u=n.height*c;if(i>d&&i<d+m&&o>l&&o<l+u?s.style.cursor="pointer":s.style.cursor="initial",b){let h=i-k,g=o-B;n.x+=h/c,n.y+=g/c,v(),k=i,B=o}};s.addEventListener("mousemove",$);s.addEventListener("touchmove",$);W.addEventListener("load",e=>{f=new Image,f.addEventListener("load",()=>v()),f.src=e.target.result});var V=document.getElementById("randomize");V.addEventListener("click",async()=>{await N(),v()});var F=document.getElementById("customImage");F.addEventListener("change",e=>{e.preventDefault(),!(e.target.files.length<=0)&&U(e.target.files[0])});var Z=document.getElementById("customImageBtn");Z.addEventListener("click",()=>{F.click()});var C=document.getElementById("toggleText"),E=document.getElementById("customText");C.addEventListener("click",()=>{I=!I,C.innerText=C.innerText==="Přidat text"?"Odebrat text":"Přidat text",v()});var H=async e=>{(e.type==="input"||E.value)&&(S=E.value,v())};E.addEventListener("click",H);E.addEventListener("input",H);var p=document.getElementById("slider"),O=n.width,G=n.height,R=e=>{n.width=A*(e/100),n.height=D*(e/100),n.x+=(O-n.width)/2,n.y+=(G-n.height)/2,O=n.width,G=n.height,v()};p.addEventListener("input",e=>R(e.target.value));var Y=document.createElement("a");Y.setAttribute("download","TohleJsmeMy.jpg");var _=document.getElementById("save");_.addEventListener("click",e=>{e.preventDefault(),Y.setAttribute("href",s.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream")),Y.click()});window.addEventListener("resize",()=>{let e=z();L=e.offsetX,T=e.offsetY,c=e.canvasScale});N().then(()=>v());var r=[],w=-1;s.addEventListener("pointerdown",e=>r.push(e));s.addEventListener("pointermove",e=>{for(let t=0;t<r.length;t++)if(e.pointerId===r[t].pointerId){r[t]=e;break}if(r.length===2){let t=Math.abs(r[0].clientX-r[1].clientX);w>0&&(t>w&&(p.value=Number(p.value)+2,R(p.value)),t<w&&(p.value=Number(p.value)-2,R(p.value))),w=t}});var x=e=>{for(let t=0;t<r.length;t++)if(r[t].pointerId===e.pointerId){r.splice(t,1);break}r.length<2&&(w=-1)};s.addEventListener("pointerup",x);s.addEventListener("pointercancel",x);s.addEventListener("pointerout",x);s.addEventListener("pointerleave",x);
//# sourceMappingURL=index.js.map
